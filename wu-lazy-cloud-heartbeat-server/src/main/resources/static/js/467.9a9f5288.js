"use strict";(self.webpackChunkwu_lazy_cloud_network=self.webpackChunkwu_lazy_cloud_network||[]).push([[467],{79467:(e,l,t)=>{t.r(l),t.d(l,{default:()=>i});var r=t(83986),n=t(35145),u=t(93540),a=(t(50886),t(66252)),o=t(2262);const i={__name:"NetWorkMappingEdit",props:{showDialog:{type:Boolean,default:!0},title:{type:String,default:"添加"},rowData:{type:Object,default:null}},emits:["closeDialog"],setup:function(e,l){var t=l.emit,i={clientId:[{required:!0,message:"请输入选择客户端",trigger:"blur"}],clientTargetIp:[{required:!0,message:"请输入客户端目标IP",trigger:"blur"}],clientTargetPort:[{required:!0,message:"请输入客户端目标端口",trigger:"blur"}],visitorPort:[{required:!0,message:"请选择访客端口",trigger:"blur"}]},c=e,d=t,p=(0,o.BK)(c),s=p.title,f=p.rowData,v=function(){d("closeDialog",!1)},m=(0,o.iH)(null),b=(0,o.iH)(null),w=(0,o.iH)(null),g=(0,o.qj)({clientId:"",clientTargetIp:"0.0.0.0",clientTargetPort:"",visitorPort:"",describe:""}),k=(0,o.BK)(g),_=k.clientId,I=k.clientTargetIp,V=k.clientTargetPort,P=k.visitorPort,h=k.describe;f.value&&(_.value=f.value.clientId,I.value=f.value.clientTargetIp,V.value=f.value.clientTargetPort,P.value=f.value.visitorPort,h.value=f.value.describe);(0,a.bv)((0,u.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:VE_API.cloudNetwork.cloudClientFindList().then((function(e){e.data.map((function(e){e.label=e.clientId,e.value=e.clientId})),b.value=e.data?e.data:[]})),y();case 2:case"end":return e.stop()}}),e)}))));var y=function(){var e=(0,u.Z)((0,r.Z)().mark((function e(){var l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,VE_API.cloudNetwork.visitorList();case 2:l=e.sent,0===l.code&&(l.data.map((function(e){e.label=e.describe,e.value=e.visitorPort})),w.value=l.data?l.data:[]);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return function(l,t){var c=(0,a.up)("el-option"),d=(0,a.up)("el-select"),p=(0,a.up)("el-form-item"),k=(0,a.up)("el-input"),y=(0,a.up)("el-form"),U=(0,a.up)("el-button"),W=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(W,{title:(0,o.SU)(s),"append-to-body":"","destroy-on-close":"","model-value":e.showDialog,onClose:t[7]||(t[7]=function(e){return v()})},{footer:(0,a.w5)((function(){return[(0,a._)("span",null,[(0,a.Wm)(U,{onClick:t[5]||(t[5]=function(e){return v()})},{default:(0,a.w5)((function(){return[(0,a.Uk)("取消")]})),_:1}),(0,a.Wm)(U,{type:"primary",onClick:t[6]||(t[6]=function(e){m.value.validate(function(){var e=(0,u.Z)((0,r.Z)().mark((function e(l){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=14;break}if("添加"!==s.value){e.next=7;break}return e.next=4,VE_API.cloudNetwork.networkMappingSave(g);case 4:t=e.sent,e.next=10;break;case 7:return e.next=9,VE_API.cloudNetwork.networkMappingUpdate((0,n.Z)({clientTargetPort:f.value.clientTargetPort},g));case 9:t=e.sent;case 10:0===t.code&&v(),e.next=16;break;case 14:return console.log("error submit!!"),e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e)})));return function(l){return e.apply(this,arguments)}}())})},{default:(0,a.w5)((function(){return[(0,a.Uk)("确定")]})),_:1})])]})),default:(0,a.w5)((function(){return[(0,a.Wm)(y,{model:g,ref_key:"formRef",ref:m,rules:i,"label-width":"80px",inline:!1},{default:(0,a.w5)((function(){return[(0,a.Wm)(p,{label:"客户端ID",prop:"clientId"},{default:(0,a.w5)((function(){return[(0,a.Wm)(d,{modelValue:(0,o.SU)(_),"onUpdate:modelValue":t[0]||(t[0]=function(e){return(0,o.dq)(_)?_.value=e:null}),placeholder:"客户端ID",clearable:""},{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(b.value,(function(e){return(0,a.wg)(),(0,a.j4)(c,{key:e.value,label:e.label,value:e.value,serverId:e},null,8,["label","value","serverId"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),(0,a.Wm)(p,{label:"访问端口",prop:"visitorPort"},{default:(0,a.w5)((function(){return[(0,a.Wm)(d,{modelValue:(0,o.SU)(P),"onUpdate:modelValue":t[1]||(t[1]=function(e){return(0,o.dq)(P)?P.value=e:null}),placeholder:"访问端口",clearable:""},{default:(0,a.w5)((function(){return[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(w.value,(function(e){return(0,a.wg)(),(0,a.j4)(c,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),(0,a.Wm)(p,{label:"客户端目标地址",prop:"clientTargetIp"},{default:(0,a.w5)((function(){return[(0,a.Wm)(k,{modelValue:(0,o.SU)(I),"onUpdate:modelValue":t[2]||(t[2]=function(e){return(0,o.dq)(I)?I.value=e:null}),placeholder:"",clearable:""},null,8,["modelValue"])]})),_:1}),(0,a.Wm)(p,{label:"客户端目标端口",prop:"clientTargetPort"},{default:(0,a.w5)((function(){return[(0,a.Wm)(k,{modelValue:(0,o.SU)(V),"onUpdate:modelValue":t[3]||(t[3]=function(e){return(0,o.dq)(V)?V.value=e:null}),placeholder:"",clearable:""},null,8,["modelValue"])]})),_:1}),(0,a.Wm)(p,{label:"描述",prop:"describe"},{default:(0,a.w5)((function(){return[(0,a.Wm)(k,{modelValue:(0,o.SU)(h),"onUpdate:modelValue":t[4]||(t[4]=function(e){return(0,o.dq)(h)?h.value=e:null}),placeholder:"",clearable:""},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model"])]})),_:1},8,["title","model-value"])}}}}}]);